<ion-header>
  <ion-navbar>
    <button ion-button [menuToggle]="activeMenu">
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>{{path}}</ion-title>
    <ion-buttons end>
        <button ion-button icon-only (click)="doSelectWS()">
            <ion-icon name="folder"></ion-icon>
          </button>
        <button ion-button icon-only (click)="doRefresh()">
          <ion-icon name="refresh"></ion-icon>
        </button>        
      </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content padding>
  <!-- <ion-searchbar (input)="search()" [(ngModel)]="searchWords"></ion-searchbar> -->
  <span *ngIf="!fileSelectMode">
    <ion-list>
      <button ion-item *ngIf="path != basePath" (click)="prevDir()">
        ..
      </button>

      <button ion-item *ngFor="let folder of folders" (click)="goTo(folder)">
        {{folder}}
      </button>
    </ion-list>
    <ion-fab right bottom class="bottom-right">
      <button ion-fab color="primary" (click)="select()">
        <ion-icon name="checkmark"></ion-icon>
      </button>
    </ion-fab>
  </span>
<!--
  <ion-grid *ngIf="fileSelectMode" text-center>
    <ion-row align-items-start>
      <button ion-button clear col-2 *ngIf="path != basePath" (tap)="prevDir()">
        <ion-icon name="folder"></ion-icon>
        <ion-label>..</ion-label>
      </button>
      <button ion-button clear col-2 *ngFor="let folder of folders" (tap)="goTo(folder)" (press)="openModal()">
        <ion-icon name="folder"></ion-icon>
        <ion-label>{{folder}}</ion-label>
      </button>
      <button ion-button clear col-2 *ngFor="let file of files" (tap)="openFile(file)" (press)="openModal()">
        <ion-icon name="document"></ion-icon>
        <ion-label>{{file}}</ion-label>
      </button>
    </ion-row>
  </ion-grid>
-->
  
  <ion-list *ngIf="fileSelectMode">
    <!--
    <ion-item *ngIf="path != basePath" (tap)="prevDir()">..</ion-item>
    <ion-item *ngFor="let folder of folders" (tap)="goTo(folder)" (press)="openModal()">
      {{folder}}
      <ion-badge item-end>Folder</ion-badge>
    </ion-item>
    <ion-item *ngFor="let file of files" (tap)="openFile(file)" (press)="openModal()">
      {{file}}
      <ion-badge item-end>File</ion-badge>
    </ion-item>    
    -->
    <ion-item *ngFor="let item of filterItems" text-wrap (click)="doEdit(item.file)">
      <span *ngFor="let token of item.tokens" [ngSwitch]="token.charAt(0)">
        <ion-badge *ngSwitchCase="'@'">{{token}}</ion-badge>
        <ion-badge *ngSwitchCase="'+'" color="secondary">{{token}}</ion-badge>
        <span *ngSwitchDefault>{{token}}</span>
      </span>
      <ion-icon name="open" item-end (click)="openFile(item.file);$event.stopPropagation();"></ion-icon>
    </ion-item>        
  </ion-list>
  
  <!--
    <ion-buttons class="top-left">
      <button ion-button clear  (click)="goBack()">
        <ion-icon name="arrow-round-back"></ion-icon>
      </button>
    </ion-buttons> -->
  <!-- <ion-item id="address-bar">{{path}}</ion-item> -->
  <ion-fab right bottom #btnnew>
    <button ion-fab (click)="doNew()"><ion-icon name="add"></ion-icon></button>
  </ion-fab>



</ion-content>